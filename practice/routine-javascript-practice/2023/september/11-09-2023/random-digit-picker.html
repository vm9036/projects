<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Digit Picker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css">
</head>

<body>
    <div class="container">
        <div class="box mt-5">
            <h1 class="title">Random Digit Picker</h1>
            <div class="columns">
                <div class="column is-6">
                    <div class="field">
                        <div class="control">
                            <textarea class="textarea" id="input-separator" cols="30" rows="10">1 
2
3
4
5
6
                            </textarea>
                        </div>
                    </div>
                </div>
                <div class="column is-6">
                    <div class="field">
                        <div class="control">
                            <textarea class="textarea" id="outputNumber" cols="30" rows="10"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <button class="button is-primary" onclick="randomDigit()">Click</button>
                </div>
            </div>
            <div class="columns">
                <div class="column is-3">
                    <div class="field">
                        <label for="" class="label">randomly interger :</label>
                        <div class="control">
                            <input type="text" id="count" class="input is-info" value="1">
                        </div>
                    </div>
                </div>
                <div class="column is-3">
                    <div class="field">
                        <label for="" class="label">input digit delimeter :</label>
                        <div class="control">
                            <input type="text" id="string-separator" class="input is-info" value="\n">
                        </div>
                    </div>
                </div>
                <div class="column is-3">
                    <div class="field">
                        <label for="" class="label">output digit delimeter :</label>
                        <div class="control">
                            <input type="text" id="output-separator" class="input is-info" value=",">
                        </div>
                    </div>
                </div>
                <div class="column is-3">
                    <div class="field">
                        <label for="" class="label">regex :</label>
                        <div class="control">
                            <input type="text" id="regexp-separator" class="input is-info" value="\n">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        function randomDigit(){
        var tool = this;
        let text= 0;
        var options = parseOptions(tool);
        if (!options)
            return "";
        if (text == 0)
            return "";
        if (options.re) {
            var lines = text.split(options.re);
        } else {
            var lines = text.split(options.inputSep);
        }
        // if (!options.repetitions) {
        //     if (lines.length == options.count) {
        //         tool.output.showWarningBadge("Only One Sample Is Possible", "The number of items is equal to the number you want to pick.");
        //     }
        //     if (lines.length < options.count) {
        //         tool.output.showNegativeBadge("Too Large Count", "The number of items is less than the number you want to pick.");
        //         return "";
        //     }
        // }
        // if (options.skipEmptyItems) {
        //     lines = removeEmptyItems(lines);
        // }
        var ret = [];
        for (var i = 0; i < options.length; i++) {
            var itemIndex = parseInt(Math.random() * lines.length, 10);
            ret.push(lines[itemIndex]);
            if (!options.repetitions) {
                lines.splice(itemIndex, 1);
            }
        }
        document.getElementById("outputNumber").value = ret.join(options.outputSep);
    }
    function removeEmptyItems(chars) {
        var newList = [];
        for (var i = 0; i < chars.length; i++) {
            if (chars[i].trim().length > 0)
                newList.push(chars[i]);
        }
        return newList;
    }
    function parseOptions(tool) {
        // var options = tool.options.get();
        var error = function(a, b) {
            tool.output.showNegativeBadge(a, b, -1);
        }
        var stringSep = document.getElementById("string-separator").value;
        var regexpSep = document.getElementById("regexp-separator").value;
        var inputSep = document.getElementById("input-separator").value;
        var outputSep = document.getElementById("output-separator").value;
        var re = null;
        if (regexpSep) {
            var regexParts = inputSep.match(/^\/(.*?)\/([gimuy]*)$/);
            if (regexParts) {
                re = new RegExp(regexParts[1],regexParts[2]);
            } else {
                re = new RegExp(inputSep);
            }
        } else {
            if (inputSep == "\\n")
                inputSep = "\n";
            if (inputSep == "\\t")
                inputSep = "\t";
        }
        if (outputSep == "\\n")
            outputSep = "\n";
        if (outputSep == "\\t")
            outputSep = "\t";
        var count = document.getElementById("count").value;
        if (!/^\d+$/.test(count)) {
            tool.output.showNegativeBadge("Invalid Count", "Count contains non digits.");
            return false;
        }
        count = parseInt(count);
        if (count < 1) {
            tool.output.showNegativeBadge("Invalid Count", "You can't pick less than one item.");
            return false;
        }
        // var repetitions = document.getElementById("with-repetitions").value;
        // var skipEmptyItems = document.getElementById("skip-empty-items").value;
        return {
            re: re,
            count: count,
            // repetitions: repetitions,
            // skipEmptyItems: skipEmptyItems,
            inputSep: inputSep,
            outputSep: outputSep
        }
    }
    </script>
</body>

</html>

<!-- 

    var bridge = function(text) {
        var tool = this;
        var options = parseOptions(tool);
        if (!options)
            return "";
        if (text.trim().length == 0)
            return "";
        if (options.re) {
            var lines = text.split(options.re);
        } else {
            var lines = text.split(options.inputSep);
        }
        if (!options.repetitions) {
            if (lines.length == options.count) {
                tool.output.showWarningBadge("Only One Sample Is Possible", "The number of items is equal to the number you want to pick.");
            }
            if (lines.length < options.count) {
                tool.output.showNegativeBadge("Too Large Count", "The number of items is less than the number you want to pick.");
                return "";
            }
        }
        if (options.skipEmptyItems) {
            lines = removeEmptyItems(lines);
        }
        var ret = [];
        for (var i = 0; i < options.count; i++) {
            var itemIndex = parseInt(Math.random() * lines.length, 10);
            ret.push(lines[itemIndex]);
            if (!options.repetitions) {
                lines.splice(itemIndex, 1);
            }
        }
        return ret.join(options.outputSep);
    }
    function removeEmptyItems(chars) {
        var newList = [];
        for (var i = 0; i < chars.length; i++) {
            if (chars[i].trim().length > 0)
                newList.push(chars[i]);
        }
        return newList;
    }
    function parseOptions(tool) {
        var options = tool.options.get();
        var error = function(a, b) {
            tool.output.showNegativeBadge(a, b, -1);
        }
        var stringSep = options["string-separator"] || true;
        var regexpSep = options["regexp-separator"] || false;
        var inputSep = options["input-separator"] || '\n';
        var outputSep = options["join-character"] || options["output-separator"] || '';
        var re = null;
        if (regexpSep) {
            var regexParts = inputSep.match(/^\/(.*?)\/([gimuy]*)$/);
            if (regexParts) {
                re = new RegExp(regexParts[1],regexParts[2]);
            } else {
                re = new RegExp(inputSep);
            }
        } else {
            if (inputSep == "\\n")
                inputSep = "\n";
            if (inputSep == "\\t")
                inputSep = "\t";
        }
        if (outputSep == "\\n")
            outputSep = "\n";
        if (outputSep == "\\t")
            outputSep = "\t";
        var count = options["count"].trim();
        if (!/^\d+$/.test(count)) {
            tool.output.showNegativeBadge("Invalid Count", "Count contains non digits.");
            return false;
        }
        count = parseInt(count);
        if (count < 1) {
            tool.output.showNegativeBadge("Invalid Count", "You can't pick less than one item.");
            return false;
        }
        var repetitions = options["with-repetitions"];
        var skipEmptyItems = options["skip-empty-items"] || false;
        return {
            re: re,
            count: count,
            repetitions: repetitions,
            skipEmptyItems: skipEmptyItems,
            inputSep: inputSep,
            outputSep: outputSep
        }
    }

 -->